<html>

    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <title>Room</title>
    </head>

    <body>
        <textarea id="output"></textarea>
        <script type="text/javascript"charset="utf-8">
        function update() { 
            const urlParam = new URLSearchParams(window.location.search.substring(1));
            console.log(urlParam);
            const room = urlParam.get("room");
            console.log(room);
            xmlhttp = new XMLHttpRequest(); 
            xmlhttp.open("GET", `/messages?room=${room}`, true); 
            xmlhttp.onreadystatechange = function () { 
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200) 
                document.getElementById("output").value = xmlhttp.responseText; 
            }
            xmlhttp.send();
        } 
        setInterval(update, 1000);
        </script>
    </body>

</html>
